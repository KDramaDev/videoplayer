class ElementCollection extends Array{ready(t){let r=this.some(t=>null!=t.readyState&&"loading"!=t.readyState);return r?t():this.on("DOMContentLoaded",t),this}isNotNull(){return null!=this[0]}isNull(){return null==this[0]}on(t,r,i){return"function"==typeof r?this.forEach(i=>i.addEventListener(t,r)):this.forEach(n=>{n.addEventListener(t,t=>{t.target.matches(r)&&i(t.target)})}),this}each(t=()=>{}){"function"==typeof t&&this.forEach(r=>t(r))}next(){return this.map(t=>t.nextElementSibling).filter(t=>null!=t)}prev(){return this.map(t=>t.previousElementSibling).filter(t=>null!=t)}removeClass(t){return this.forEach(r=>r.classList.remove(t)),this}addClass(t){return"object"==typeof t?this.each(r=>[...t].forEach(t=>r.classList.add(t))):this.each(r=>r.classList.add(t)),this}text(t){return t?(this.forEach(r=>r.textContent=t),this):this[0].textContent}html(t,r=!1){return t?(this.forEach(i=>!0==r?i.innerHTML=t:i.innerHTML+=t),this):this[0].innerHTML}toText(){return this[0].outerHTML}attr(t,r){return t&&r?(this.forEach(i=>i.setAttribute(t,r)),this):this[0].getAttribute(t)}css(t,r){return this.forEach(i=>i.style.setProperty(t,r)),this}style(t){return this.forEach(r=>r.setAttribute("style",t)),this}data(t,r){let i="object"==typeof t?t[0]:t,n=i?.replace(/(-[a-z])/,t=>t.replace("-","").toUpperCase());if(t&&r)return this.forEach(t=>t.dataset[n]=r),this;if("object"!=typeof t)return this[0].dataset[n];{let a=[];return this.forEach(t=>a.push(t.dataset[n])),a}}show(t=!1,r="block"){return this.forEach(i=>i.setAttribute("style",`display:${r}${!0==t?"!important":""}`)),this}hide(t=!1){return this.forEach(r=>r.setAttribute("style",`display:none${!0==t?"!important":""}`)),this}scroll(t){return this.forEach(r=>r.scrollIntoView({behavior:t})),this}remove(){return this.forEach(t=>t.remove()),this}append(t,r="last"){let i="first"===r?"afterbegin":"beforeend";return this.forEach(r=>r.insertAdjacentHTML(i,t)),this}appendAB(t,r="after"){let i="before"===r?"beforebegin":"afterend";return this.forEach(r=>r.insertAdjacentHTML(i,t)),this}appendAoB(t,r){return this.forEach(i=>i.parentNode.insertBefore(t,"before"===r?i:i.nextSibling)),this}appendTo(t){return this.forEach(r=>r.appendChild(t)),this}insert(t={},r){return this[0].parentNode.insertBefore($create(t),$qa(r)[0]),this}createChild(t){return this.forEach(r=>{if(void 0!==t){var i=$create(t);null!=r&&r.appendChild(i)}}),this}children(){return this.forEach(t=>t.children),this}find(t){let r=this[0],i=r.id?"#"+r.id:"",n=r.className?"."+r.className.split(" ").join("."):"",a=this[0].localName+i+n;return $Qs(a+" "+t)}match(t){return this[0].matches(t)}clone(t,r,i=!0){return this.forEach(n=>{let a=$qs(t),s=a.cloneNode(i);r?this.appendAoB(s,r):n.appendChild(s)}),this}}class AjaxPromise{constructor(t){this.promise=t}done(t){return this.promise=this.promise.then(r=>(t(r),r)),this}fail(t){return this.promise=this.promise.catch(t),this}always(t){return this.promise=this.promise.finally(t),this}}function $Qs(t){if(("string"==typeof t||t instanceof String)&&"<div>"!==t)return new ElementCollection(...document.querySelectorAll(t));if("<div>"===t){let r=document.createElement("div");return r.querySelectorAll("div"),new ElementCollection(r)}}function appendAOB(t,r,i="before",n){Element.prototype.appendAfterOrBefore=function(t){null!=t&&t.appendAoB(this,i)};var a=$create(t),s=$Qs(r);if(n){var o=!1;$Qs(window).on("scroll",function(){(0!=document.documentElement.scrollTop&&!1===o||0!=document.body.scrollTop&&!1===o)&&(t?.customElement?t?.element.appendAfterOrBefore(s):a.appendAfterOrBefore(s),o=!0)},!0)}else t?.customElement?t?.element.appendAfterOrBefore(s):a.appendAfterOrBefore(s)}function $qs(t){var r=document.querySelector(t);if(null!=r)return r}function $qa(t){return document.querySelectorAll(t)}function getAttr(t,r){return{property:t,value:r}}function $create(t){let r=r=>t?.[r];if(void 0!==t){var i=document.createElement(r("tagName")||"div");return r("class")&&(i.classList=r("class")),r("id")&&(i.id=r("id")),r("style")&&i.setAttribute("style",r("style")),r("html")&&(i.innerHTML=r("html")),r("src")&&(i.src=r("src")),void 0!==r("attr")&&r("attr")?.map(t=>{t?.property!=void 0&&i.setAttribute(t?.property,t?.value||"")}),i}}function toCapitalized(t=String){return String(t).replace(/(^\w{1})|(\s+\w{1})/g,t=>t.toUpperCase())}function toUpperCapital(t,r=!1){return!0==r?t.toUpperCase():toCapitalized(t)}function contains(t=String,r=String){return r.replace(/\,\s+/g,",").split(",").filter(r=>null!=String(t).match(r)&&String(t).match(r)[0]).length}function toArraySplit(t=String,r="",i){return String(t).split(i||" ").map(t=>r+t)}function StyleSheets(t){if(void 0!==t){var r,i,n,a;function s(t){return t?.replace(/(\r\n|\n|\r|\s\s+)/gi,"")}r="".concat(iF(s(t?.FontFace)),iF(s(t?.xl)),iF(s(t?.lg),`@media only screen and (max-width: ${t?.lgWidth||999.98}px){`,"}"),iF(s(t?.md),`@media only screen and (max-width: ${t?.mdWidth||767}px){`,"}"),iF(s(t?.sm),`@media only screen and (max-width: ${t?.smWidth||480}px){`,"}"),iF(s(t?.ssm),`@media only screen and (max-width: ${t?.ssmWidth||360}px){`,"}")),i=parseInt(1e5*Math.random()),n=$create({tagName:"style"}),a=document.getElementsByTagName("head")[0],n.id=`pkb-blocks-${i}-inline-style`,n.textContent=r,a.appendChild(n)}}function iF(t,r="",i="",n=""){return t?r+t+i:n}function elseIf(t,r,i){return t?iF(i?.p)+r+iF(i?.s):iF(i?.d)}function $scrollToAction(t,r,i=!0){let n=$qa(t),a=t=>r?.[t],s={style:a("style"),class:a("class"),id:a("id")},o=void 0!==s.style;function l(){for(var t=0;t<n.length;t++){var r=n[t];r.getBoundingClientRect().top-window.innerHeight+20<0?(s.class&&r.classList.add(s.class),s.id&&(r.id=s.id),o&&r.setAttribute("style",s.style?.add||"")):!0==i&&(s.class&&r.classList.remove(s.class),s.id&&(r.id=""),o&&r.setAttribute("style",s.style?.rm||""))}}$Qs(window).on("scroll",l),l()}function $animateDelay(t,r=3){let i=String(t)?.replace(/\,\s+/g,",").split(/,(?!\d\d)/),n=$qa(i[0]);return[...Array(n.length).keys()].map(t=>{let a=`#animate-fade-in:nth-child(${t+1})`,s=[...i].map(t=>t+a).join(",");if(n.length>0)return`${s} {-webkit-animation-delay:.${r+t}s;animation-delay:.${r+t}s;}`}).join("")?.toString()}function awaitLoading(t,r=5,i=0){var n,a;let s;n=r,a=i,function r(){if(t?.start){var i=$Qs(t?.selector);t?.useSkip==!0&&i.html(t?.innerHTML||"Skip after "+n--+"s"),setTimeout(t?.start,0)}else n--;if(n<a){if(t?.start){t?.useSkip==!0&&i.html("");var o=setTimeout(t?.ended,0)}else o=setTimeout(t,0);return o}s=setTimeout(r,1e3)}()}function getLabels(t){var r=String(t).toLowerCase();function i(t,i){var n=r?.replace(t,"");return n?.replace(i,"")}function n(t){return r.split(t)[1].split(" ")[0].split("</b>")[0]?.replace(/\$/g," ")}function a(t){return r?.includes(t)}function s(t,r,i){return t.length>0?'<span class="'+r+'">'+utils().upperCapital(t,i)+"</span>":""}function o(t,r,i){return a(t)?s(n(t),r,i):""}function l(t,r,i){return a(t)?[...n(t).split(",")].map(t=>s(t,r,i)).join(""):""}var c=a("{quality}=")||a("{type}=")?'<div class="absolute flex gap-1 z-[5] left-[5px] top-[5px]">'+l("{type}=","type")+l("{quality}=","quality",!0)+"</div>":"",u=t=>s(n("{file}="),"file "+t,!0),h=a("{file}=dub")?u("dub"):a("{file}=sub")?u("sub"):a("{file}=raw")?u("raw"):o("{year}=","release"),d=a("{duration}=")?s(n("{duration}="),"duration"):a("{rating}=")?s(parseFloat(n("{rating}="))+"<sub> / 10</sub>","rating"):o("{episode}=","episode"),p=t=>s(t,"ribbon "+t+" is-visible",!0),f=i(/(?![\{]completed\})./g,""),m=i(/(?![\{]ongoing\})./g,""),y=i(/(?![\{]upcoming\})./g,""),g=i(/(?![\{]khdub\})./g,""),b=i(/(?![\{]cc\})./g,""),v=a("{completed}")&&f.length>0?p("completed"):a("{ongoing}")&&m.length>0?p("ongoing"):a("{upcoming}")&&y.length>0?p("upcoming"):a("{khdub}")&&g.length>0?'<span class="ribbon khmer-dubbed is-visible">និយាយខ្មែរ</span>':a("{cc}")&&b.length>0?'<span class="closed-caption"></span>':"";return[c,h,d,v]}function removeLabels(t){$(function(){$(t).each(function(){var t=$(this);if(contains(t.text().trim(),"quality,type,file,year,duration,episode,rating,cc,completed,khdub,ongoing,upcoming")>0)return t.remove()})})}function vanillaLazy(){window.lazyLoadOptions={callback_loading:function(){e.getAttribute("data-src")},callback_loaded:function(){e.getAttribute("data-src")}},window.addEventListener("LazyLoad::Initialized",function(t){window.lazyLoadInstance=t.detail.instance},!1)}$Qs.get=function({url:t,type:r,data:i,dataType:n,success:a=()=>{}}){let s=(void 0!=i?"?":"")+Object.entries(i||{}).map(([t,r])=>`${t}=${r}`).join("&");return new AjaxPromise(fetch(t+s,{method:r||"GET",headers:{"Content-Type":n}}).then(t=>{if(t.ok)return t.json();throw Error(t.status)}).then(t=>(a(t),t)))};class Useful{isMobile={max:t=>this.MediaQuery("max-width:"+t+"px"),min:t=>this.MediaQuery("min-width:"+t+"px")};url=this.URL();debug=this.inspectDetection;MediaQuery(t=String){return window.matchMedia(`only screen and (${t})`).matches}option(t){return t||""}if(t,r){let i=t=>this.option(t);return t?i(r?.p)+t+i(r?.s):i(r?.d)}elif(t,r,i){let n=t=>this.option(t);return t?n(i?.p)+r+n(i?.s):n(i?.d)}isNumeric(t){var r=typeof t;return("number"===r||"string"===r)&&!Number.isNaN(t-Number.parseFloat(t))}URL(){let t=window.location,r=t.host,i=t.href,n=new URL(i).pathname;return{domain:r,current:i,pathname:n}}toArray(t=String,r=","){var i=[];return String(t).split(r).forEach(t=>i.push(t.trim())),i}contains(t=String,r=String,i="or"){let n=String(t).toLowerCase();var a,s=this.toArray(r);switch(i){case"and":a=s.every(t=>n.match(t));break;case"eq":a=s.some(t=>n===t);break;default:a=s.some(t=>n.match(t))}return a}capitalized(t=String){return String(t).replace(/(^\w{1})|(\s+\w{1})/g,t=>t.toUpperCase())}upperCapital(t,r=!1){return!0==r?t.toUpperCase():this.capitalized(t)}inspectDetection(){!function t(){try{!function t(r){1===(""+r/r).length&&0!==r||(function(){}).constructor("debugger")(),t(++r)}(0)}catch(r){setTimeout(t,5e3)}}()}GetImageSize(t=100){var r={data:"data-src",selector:"img[data-src]"};async function i(){let{width:t,height:i}=await new Promise((t,i)=>{let n=new Image;$Qs(r.selector).isNotNull()&&(n.onload=()=>t({width:n.width,height:n.height}),n.onerror=t=>i(t),n.src=$Qs(r.selector).attr(r.data))});await $Qs(r.selector).attr("width",t).attr("height",i).attr("sizes",`(max-width: ${t}px) 100vw, ${t}px`)}try{setTimeout(i,t)}catch(n){throw Error(n)}}}function utils(){return new Useful}
